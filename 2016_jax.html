<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Big Data in the Browser?</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="reveal.js/css/reveal.css">
    <link rel="stylesheet" href="reveal.js/css/theme/black.css" id="theme">
    <!--<link rel="stylesheet" href="reveal.js/css/theme/night.css" id="theme">-->
    <!--<link rel="stylesheet" href="reveal.js/css/theme/simple.css" id="theme">-->


    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">
    <style>
        /*pre code {*/
            /*display: block;*/
            /*padding: 0.5em;*/
            /*background: #FFFFFF !important;*/
            /*color: #000000 !important;*/
        /*}*/

        .right-img {
            margin-left: 10px !important;
            float: right;
            height: 500px;
        }
    </style>

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="reveal.js/lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

        <section data-background="airline-pictures/delta-container.jpg">
        <!--<section>-->
             <h2>Big Data Visualisierung in the Browser</h2>
            <h4>Interactive graphics with D3, Crossfilter, and DC</h4>
            <p>
                <small><a href="http://zeigermann.eu">Oliver Zeigermann</a> / <a href="http://twitter.com/djcordhose">@DJCordhose</a>
                </small>
            </p>
            <!--http://www.qr-code-generator.com-->
            <img src="2016_jax_qr.jpg" height="200px">
            <p><small><a href="http://bit.ly/1QWHtyn">http://bit.ly/1QWHtyn</a></small></p>
        </section>

        <section>
            <h2>My Question for today: What can we learn from domestic US air-traffic data?</h2>
        </section>

        <section data-background="airline-pictures/landing-far.jpg">
            <h2>However: That question is really vague</h2>
            <h3>
            <ul>
                <li class="fragment">In which respect?
                <li class="fragment">Overall frequency?
                <li class="fragment">For a specific airport?
                <li class="fragment">For a specific airline?
                <li class="fragment">For a specific date?
            </ul>
            </h3>

        </section>

        <section>
            <h2>Problem #1: Often you do not even know the question</h2>
        </section>

        <section>
            <h2>What do you do when you have no clue?</h2>
        </section>

        <section>
            <h2>Solution #1: You play around</h2>
        </section>

        <section>
            <h3>D3.js: Dynamic graphics in the browser</h3>
                <p>Interactive graphics are the basis of playing around</p>

            <a target="_blank" href="http://mbostock.github.io/d3/talk/20111116/#9">
                <img src="hierarchical-barchart-screenshot.png" height="400px">
            </a>
<!--
            Local version (needs WebStorm and an open visualization project)
            http://localhost:63342/visualization/d3/talk/20111116/index.html#11
-->
        </section>

        <section>
            <h3>D3.js: More Details</h3>
            <ul>
                <li class="fragment"><a target="_blank" href="http://d3js.org/">http://d3js.org/</a>
                <li class="fragment">Transform your data into visualizations in the browser
                <li class="fragment">Style of programming declarative
                <li class="fragment">Main field of use are diagrams using SVG (but D3 is not limited to that)
                <li class="fragment">Data is bound to SVG elements which change once the data changes
            </ul>
        </section>
        <section>
            <h4>D3 Example Code</h4>
<pre><code data-trim contenteditable>var updateSelection = d3.select("body") // select the body tag
    .selectAll("p")  // select all p tags which are children
    .data([4, 8, 15, 16, 23, 42]) // bind elements with data
    .text(function (d) { // data gets passed in
        return "Iâ€™m number " + d + "!"; // result gets displayed
    })
    .style("font-size", function (d) {
        return 2 * d + "px";
    });
</code></pre>
<pre class="fragment"><code data-trim contenteditable>
&lt;p>First p&lt;/p>
&lt;p>Second p&lt;/p>
&lt;p>Third p&lt;/p>
</code></pre>
            <div><a target="_blank" href="code/d3-data-bind.html"><img class="fragment" src="basic-d3.png" height="150px"></a></div>
        </section>

        <section>
            <h3>More playful stuff using D3</h3>
            <a target="_blank" href="http://mbostock.github.io/d3/talk/20111018/index.html#33">
                <img src="d3-collision-screenshot.png" height="400px">
            </a>
            <!--
                        Local version (needs WebStorm and an open visualization project)
                        http://localhost:63342/visualization/d3/talk/20111018/index.html#33
            -->
        </section>

        <section>
            <h3>Flexible transistions between display types</h3>
            <a target="_blank" href="http://mbostock.github.io/d3/talk/20111116/#11">
                <img src="d3-transitions.png" height="400px">
            </a>
            <!--
                        Local version (needs WebStorm and an open visualization project)
                        http://localhost:63342/visualization/d3/talk/20111116/index.html#11
            -->
        </section>

        <section>
            <h2>Problem #2: Data might be really big and multivariate</h2>
        </section>

        <section>
            <h2>Solution #2: Use indexes and multidimensional filtering in the browser</h2>
        </section>

        <section>
            <h3>Crossfilter: Filtering millions of data sets in real time</h3>
            <ul>
                <li class="fragment"><a target="_blank" href="http://square.github.io/crossfilter/">http://square.github.io/crossfilter/</a>
                <li class="fragment">Can filter up to millions of data sets in real time in the browser
                <li class="fragment">Data sets are indexed when loaded
                <li class="fragment">You specify what you want to filter using dimensions
                <li class="fragment">Can be used to feed data to D3
            </ul>
        </section>
        <section>
            <h3>Typical Types of Data</h3>
            <ul>
                <li class="fragment"><em>numerical:</em> numbers
                <li class="fragment"><em>categorical:</em> limited number of discrete values
                <li class="fragment"><em>time series:</em> temporal value, timestamp
                <li class="fragment"><em>text:</em> words
            </ul>
        </section>

        <section>
            <h3>The data</h3>
<pre><code data-trim contenteditable class="javascript">
// this is how the data for our flights looks like
console.log(flights[0]);
{
  "Month": "9", // part of timestamp (year implied)
  "DayofMonth": "5", // part of timestamp (year implied)
  "UniqueCarrier": "US", // categorical
  "AirTime": "67", // numerical
  "ArrDelay": "22", // numerical
  "DepDelay": "31", // numerical
  "Origin": "MCO", // categorical
  "Dest": "CLT", // categorical
  "Distance": "468", // numerical
  "Cancelled": 0 // categorical
}
</code></pre>
        </section>

        <section data-background="airline-pictures/sw.jpg">
            <h3>Where does the data come from?</h3>
            <ul>
                <li class="fragment"><a target="_blank" href="http://stat-computing.org/dataexpo/2009/">http://stat-computing.org/dataexpo/2009/</a>
                <li class="fragment">All domestic US flights from 1987 to 2008, grouped per year
                <li class="fragment">Format CSV
                <li class="fragment">2001 data reduced using <em>awk</em>
                <li class="fragment">Small set: Just September 2001
                <li class="fragment">Larger set: Just September to November 2001
                <li class="fragment">Some columns cut off using <em>cut</em>
            </ul>
        </section>
        <section>
            <h2 style="color: red">Caution</h2>
            <h4 class="fragment">Interpretation already starts with selection of input data sets</h4>
            <ul>
                <li class="fragment">Different time ranges can give very different results
                <li class="fragment">What columns are relevant is not easy to say
                <li class="fragment">Even the 'raw' data contains a lot of assumptions and interpretations from the initial creator
                <li class="fragment">Can you ever have truly objective data?
                <li class="fragment">In the first version of the talk I ignored 'cancelled' leading to bad results
                <li class="fragment">Bad mistakes in this phase of the processing can not be healed in later steps
            </ul>
        </section>
        <section>
            <h3>Creating a Crossfilter</h3>
<pre><code data-trim contenteditable>
// creating a new crossfilter (multi-dimensional dataset)
flight = crossfilter(flights);
console.log(flight.size()); // 490698
</code></pre>
        </section>
        <section>
            <h3>Creating Dimensions</h3>
<pre><code data-trim contenteditable class="javascript">
// creating a dimension for all carriers of all flights
// data of dimension needs to be comparable
carrier = flight.dimension(function (d) {
    return d.UniqueCarrier;
});
</code></pre>
<pre class="fragment"><code data-trim contenteditable>
// dates properly constructed
date = flight.dimension(function (d) {
    return new Date(2001, d.Month - 1, d.DayofMonth);
});
</code></pre>
<pre class="fragment"><code data-trim contenteditable>
// early coercion is a good idea for better performance
airTime = flight.dimension(function (d) {
    return parseInt(d.AirTime);
});
</code></pre>
        </section>
        <section>
            <h3>Reducing Dimensions</h3>
<pre><code data-trim contenteditable>
// group() reduces this dimension to a group
// you can also supply a mapping function
// identity is used as default
var distrinctCarriersGroup = carrier.group();
console.log("Distinct carriers: " + distrinctCarriersGroup.size());
// 12
</code></pre>
<pre class="fragment"><code data-trim contenteditable class="javascript">
// all() returns all grouped results as an array
var distinctCarriers = distrinctCarriersGroup.all();
var carrierNames = distinctCarriers.map(function (carrier) {
    // contain key and value
    return carrier.key;
});
console.log(carrierNames);
// ["AA", "AQ", "AS", "CO", "DL", "HP",
    "MQ", "NW", "TW", "UA", "US", "WN"]
</code></pre>
        </section>
        <section>
            <h3>Filtering</h3>
<pre><code data-trim contenteditable>
// filter just for TW
carrier.filter("TW");
// groupAll() creates a group intersecting all current filters
console.log("TW flights", flight.groupAll().value()); // 19427
</code></pre>
<pre class="fragment"><code data-trim contenteditable class="javascript">
// dimensions are stateful: result is a combination of all filters
origin.filter("EWR");
console.log("coming from EWR", flight.groupAll().value()); // 179
</code></pre>
<pre class="fragment"><code data-trim contenteditable>
dest.filter("STL");
console.log("going to STL", flight.groupAll().value()); // 179
</code></pre>
<pre class="fragment"><code data-trim contenteditable>
// this resets the filter on carrier
carrier.filterAll();
console.log("all flights from EWR to STL", flight.groupAll().value());
// 203
</code></pre>
        </section>
        <section>
            <h3>Sample Code: Accessing filtered data</h3>
<pre><code data-trim contenteditable class="javascript">
// intersection of all filters,
// but descending order by this dimension
// parameter could be any number of results, even Infinity
var filteredFlights = dest.top(1);
[
  {
    "Month": "9",
    "DayofMonth": "28",
    "UniqueCarrier": "TW",
    "AirTime": "119",
    "ArrDelay": "-40",
    "DepDelay": "-9",
    "Origin": "EWR",
    "Dest": "STL",
    "Distance": "872"
  }
]
</code></pre>
<pre class="fragment"><code data-trim contenteditable>
// also possible
dimension.bottom(k)
</code></pre>
        </section>
        <section>
            <h2>Run sample code</h2>
            <p>Open in Chrome for performance</p>
            <p>Might take a while</p>
            <p>Open developer console in browser to see any result</p>
            <p>You might have to wait until run through for the first time, then open console and reload</p>
            <p>Experiment with the dimensions</p>
            <div><a target="_blank" href="code/crossfilter-911.html">Run</a></div>
        </section>

        <section>
            <h2>Problem #3: How to display dimensions in a connected way?</h2>
            <h3 class="fragment">Writing JavaScript code is not most convenient to do that</h3>
            <h3 class="fragment">Also not accessible to most people</h3>
            <h3 class="fragment">How do you find connections?</h3>
        </section>

        <section>
            <h2>Solution #3: Combine crossfilter with D3</h2>
        </section>

        <section>
            <h3>dc.js: Charting with D3 and Crossfilter</h3>
            <ul>
                <li class="fragment"><a target="_blank" href="http://dc-js.github.io/dc.js/">http://dc-js.github.io/dc.js/</a>
                <li class="fragment">Prebuilt integration of D3 and Crossfilter
                <li class="fragment"><a target="_blank" href="http://dc-js.github.io/dc.js/examples/">offers a couple of diagram types that are useful for interactive big data</a>
                    <ul>
                        <li>bar
                        <li>pie
                        <li>many more
                    </ul>
                    </li>
                </li>
            </ul>
        </section>
        <section>
            <h3>dc.js Demo</h3>
            <a target="_blank" href="http://dc-js.github.io/dc.js/"><img src="dc-nasdaq-screenshot.png" height="400px"></a>
            <p><small><a target="_blank" href="http://dc-js.github.io/dc.js/">Nasdaq 100 Index 1985-2012</a></small></p>

            <!--
            Local version (needs WebStorm and an open visualization project)
            http://localhost:8888/web
            http://localhost:8888/web/vc
            http://localhost:8888/web/examples
            -->
        </section>

        <section>
            <h2>Problem #4: Which diagram types to choose and how to arrange them?</h2>
        </section>

        <section>
            <h1 class="fragment">NO</h1>
            <h2>Solution #4: That is the hard part</h2>
            <h3 class="fragment">Rather an art than a craft</h3>
        </section>

        <section>
            <h3>How to create a data story?</h3>
            <img src="data-story.jpg" height="500px">
            <p><small>https://advocacyassembly.org</small></p>
        </section>

        <section>
            <h3>Choose the graphical encodings...</h3>
            <h3 class="fragment">... that are best visually decoded.</h3>
        </section>

        <section>
            <h4>Graphical Encodings</h4>
            <img src="visualizations.png" height="250px">
            <p><small>http://strataconf.com/big-data-conference-ny-2015/public/schedule/detail/43411</small></p>
        </section>

        <section>
            <h2>How do you really make a design?</h2>
            <img class="fragment" src="design.jpg" height="400px">
        </section>

        <section>
            <h2>Ordering Values: Possisbly first pie chart ever</h2>
            <img src="proportions-of-the-turkish-empire_502910c4b1b6b_w1500.jpeg" height="400px">
            <p><small>http://blog.visual.ly/12-great-visualizations-that-made-history/</small></p>
        </section>

        <section>
            <h2>Pie Charts have drawbacks</h2>
            <p>Hard to compare their segments except for the classic</p>
            <img src="pie-chart.jpg" height="450px">
        </section>

        <section>
            <h3>Order (Part #1): Display Carriers as a Pie Chart</h3>
            <div class="fragment">
                <a target="_blank" href="code/dc-911-pie-carrier.html"><img src="screenshot-pie.png" height="400px"></a>
                <div><a target="_blank" href="code/dc-911-pie-carrier.html">Run (have a little patience)</a></div>
            </div>
        </section>

        <section>
            <h3>Code for creating the pie chart</h3>
<pre><code data-trim contenteditable>
var pieChartCarriers = dc.pieChart("#pie");
pieChartCarriers
        .slicesCap(5)
        .dimension(carrier)
        .group(carrier.group().reduceCount());
</code></pre>
        </section>

        <section>
            <h3>Map and Connect (Part #2): Origin, Destination, Carriers combined</h3>
            <div class="fragment">
                <a target="_blank" href="code/dc-911-select-dest.html"><img src="screenshot-org-dest-carrier.png" height="400px"></a>
                <div><a target="_blank" href="code/dc-911-select-dest.html">Run (have a little patience)</a></div>
            </div>
        </section>

        <section>
            <h3>Use case: Destinations reached by Delta flights from Austin</h3>
            <div class="fragment">
                <a target="_blank" href="code/dc-911-select-dest.html"><img src="screenshot-use-case.png" height="400px"></a>
                <div><a target="_blank" href="code/dc-911-select-dest.html">Run (have a little patience)</a></div>
            </div>
        </section>

        <section>
            <h2>Time Series: London Underground ad from 1928</h2>
            <a target="_blank" href="http://www.citymetric.com/sites/default/files/bodyimage_201505/old_tube_ad_1.jpg"><img src="old_tube_ad_1.jpg" height="400px"></a>
            <p><small>via <a target="_blank" href="http://www.citymetric.com/transport/1928-ad-london-underground-combines-data-awesome-1513">http://www.citymetric.com/</a></small></p>
        </section>

        <section>
            <h3>Time Series (Part #3): Flights to NVC by carriers AA and UA</h3>
            <div class="fragment">
                <a target="_blank" href="code/dc-911-select-dest-timeline.html"><img src="screenshot-aa-ua-to-nyc.png" height="400px"></a>
                <div><a target="_blank" href="code/dc-911-select-dest-timeline.html">Run (have a little patience)</a></div>
            </div>
        </section>

        <section>
            <h3>Code for creating the line chart</h3>
<pre><code data-trim contenteditable>
var chart = dc.lineChart("#series");
chart
    .dimension(date)
    .group(date.group())
    .x(d3.scale.linear().domain([new Date(2001, 08, 01),
                                 new Date(2001, 08, 30)]))
    .brushOn(true)
    .xAxis().ticks(30).tickFormat(
        function (e) {
            return new Date(e).getDate() + 1;
        }
    );
</code></pre>
        </section>

        <section>
            <h3>Map (Part #4): All flights from Hawaii</h3>
            <div class="fragment">
                <a target="_blank" href="code/dc-911-map.html"><img src="screenshot_hawaii_map.png" height="400px"></a>
                <div><a target="_blank" href="code/dc-911-map.html">Run (have a little patience)</a></div>
            </div>
        </section>
        <section>
            <h3>Mixing Different data sources</h3>
            <ul>
                <li class="fragment">sometimes you need to mix data from different sources
                <li class="fragment">in our case the states airports are in and airport codes
                <li class="fragment">states are not in our original data
                <li class="fragment">so we load both data and merge
                <li class="fragment">we also create additional dimensions for the state
                <li class="fragment">sources can be in many formats
                <li class="fragment">even data scraping might be necessary (which I did in
                <a target="_blank" href="code/helper_data/airports_by_state.html">code/helper_data/airports_by_state.html)
                    </a>
            </ul>
        </section>

        <section>
            <h3>Code for creating the map</h3>
<pre><code data-trim contenteditable>
var stateOriginMap = dc.geoChoroplethChart("#state-origin-map");
stateOriginMap.width(500)
    .height(250)
    .dimension(stateOrigin)
    .group(stateOrigin.group().reduceCount())
    .colors(d3.scale.quantize().range(["#E2F2FF", "#C4E4FF", "#9ED2FF", "#81C5FF", "#6BBAFF", "#51AEFF", "#36A2FF", "#1E96FF", "#0089FF", "#0061B5"]))
    .colorDomain([0, 20000])
    .colorCalculator(function (d) {
        return d ? stateOriginMap.colors()(d) : '#ccc';
    })
    .overlayGeoJson(statesJson.features, "state", function (d) {
        return d.properties.name;
    });
</code></pre>
        </section>

        <section data-background-image="backgrounds/dark-cabin.jpg">
            <h2>Wrapup</h2>
            <ul>
                <li class="fragment">D3 helps you to interactively explore your data visually
                <li class="fragment">For large amounts of multivariate datasets
                    <ul>
                        <li class="fragment">Crossfilter allows for fast multidimensional filtering
                        <li class="fragment">there are limitations to data size, number of data sets, and dimensions
                        <li class="fragment">you might have to make a pre-selection
                        <li class="fragment">still millions of data sets are possible
                    </ul>
                </li>
                <li class="fragment">Use DC for coordinated visualizations with powerful widgets
                <li class="fragment">Choosing data, dimensions, chart types, and how to connect them is an art rather than a craft
            </ul>
        </section>

        <section>
            <h2>Resources</h2>
            <ul>
                <li><a href="https://www.google.com/publicdata/directory?hl=en_US&dl=en_US" target="_blank">Google Public Data Explorer</a>
                <li><a href="http://ourworldindata.org/" target="_blank">Our World in Data: Loads of visualizations about how living standards changed</a>
                <!--<li><a href="http://thegamma.net" target="_blank">TheGamma: Simple code behind interactive articles</a>-->
                <li><a href="http://data.worldbank.org/developers" target="_blank">
                World Bank Data</a>
                <li><a href="https://medium.com/accurat-studio/sketching-with-data-opens-the-mind-s-eye-92d78554565#.pv7dcyb43" target="_blank">
                    From Data to Story</a>
                <!--<li><a href="https://en.wikipedia.org/wiki/Principal_component_analysis" target="_blank">-->
                    <!--Alternative / Possible Addition: PCA</a>-->
                <!--<li><a href="http://r2d3.us" target="_blank">-->
                    <!--Mind blowing visual introduction to machine learning with D3</a>-->
                <li><a href="http://setosa.io" target="_blank">
                    Great D3 visualizations</a>
            </ul>
        </section>


        <section  data-background="airline-pictures/stl.jpg">
            <a href="http://www.embarc.de/"><img src="embarc13.png"
                                                 height="150"></a>
            <h2><br></h2>
            <h2><br></h2>
            <h1>Thank you!</h1>

            <h2>Questions / Discussion</h2>

            <p>
                <a href="http://zeigermann.eu">Oliver Zeigermann</a> / <a href="http://twitter.com/djcordhose">@DJCordhose</a>

            </p>
        </section>
    </div>

</div>

<script src="reveal.js/lib/js/head.min.js"></script>
<script src="reveal.js/js/reveal.js"></script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
            {
                src: 'reveal.js/lib/js/classList.js', condition: function () {
                return !document.body.classList;
            }
            },
            {
                src: 'reveal.js/plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'reveal.js/plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'reveal.js/plugin/highlight/highlight.js', async: true, condition: function () {
                return !!document.querySelector('pre code');
            }, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            },
            {src: 'reveal.js/plugin/zoom-js/zoom.js', async: true},
            {src: 'reveal.js/plugin/notes/notes.js', async: true}
        ]
    });

</script>

</body>
</html>
